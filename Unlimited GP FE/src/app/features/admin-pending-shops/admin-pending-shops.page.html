<div class="admin-page">
  <div class="admin-header">
    <div>
      <h1 class="page-title">{{ 'admin.pendingShops' | t }}</h1>
      <p class="page-subtitle">{{ 'admin.reviewApplications' | t }}</p>
    </div>
    <div class="stats" *ngIf="!loading()">
      <span class="badge">{{ shops().length }} {{ 'common.pending' | t }}</span>
    </div>
  </div>

  <div *ngIf="serverError()" class="alert">{{ serverError() }}</div>

  <div *ngIf="loading()" class="loading-state">
    <div class="spinner"></div>
    <p>{{ 'admin.loadingRequests' | t }}</p>
  </div>

  <div *ngIf="!loading() && shops().length === 0" class="empty-state">
    <div class="empty-icon">âœ“</div>
    <h3>{{ 'admin.allCaughtUp' | t }}</h3>
    <p>{{ 'admin.noPendingApps' | t }}</p>
  </div>

  <div *ngIf="!loading() && shops().length > 0" class="requests-list">
    <div class="request-item" *ngFor="let s of shops()">
      <div class="request-image">
        <img *ngIf="s.imageUrl" [src]="s.imageUrl" [alt]="s.shopName" />
        <div *ngIf="!s.imageUrl" class="placeholder-img">
          <span>{{ (s.shopName || s.name || 'S').charAt(0).toUpperCase() }}</span>
        </div>
      </div>
      
      <div class="request-content">
        <div class="request-header">
          <h3 class="shop-name">{{ s.shopName || s.name }}</h3>
          <span class="owner-badge">
            <span class="label">{{ 'admin.owner' | t }}:</span> {{ s.ownerUserName }}
          </span>
        </div>
        <p class="description">{{ s.description || ('admin.noDescription' | t) }}</p>
      </div>

      <div class="request-actions">
        <button class="action-btn approve" (click)="approve(s)" title="Approve">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
          <span>{{ 'admin.approve' | t }}</span>
        </button>
          <button type="button" class="action-btn reject" (click)="reject(s)" title="Reject">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
          <span>{{ 'admin.reject' | t }}</span>
        </button>
      </div>
    </div>
  </div>

  <!-- Reject modal -->
  <div class="modal-backdrop" *ngIf="showRejectModal()"></div>
  <div class="reject-modal" *ngIf="showRejectModal()">
    <h3>{{ 'admin.rejectionReason' | t }}</h3>
    <p *ngIf="currentRejectShop()">{{ 'admin.shops' | t }}: {{ currentRejectShop()?.shopName || currentRejectShop()?.name }}</p>
    <div *ngIf="serverError()" class="modal-error">{{ serverError() }}</div>
    <textarea [(ngModel)]="rejectionTextValue" rows="6" [placeholder]="i18n.t('admin.rejectPlaceholder')"></textarea>
    <div class="modal-actions">
      <button type="button" class="btn btn-secondary" (click)="cancelReject()">{{ 'common.cancel' | t }}</button>
      <button type="button" class="btn btn-primary" (click)="submitReject()">{{ 'admin.sendAndReject' | t }}</button>
    </div>
  </div>
</div>
