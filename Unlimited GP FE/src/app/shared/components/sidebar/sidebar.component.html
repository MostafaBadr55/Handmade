<aside class="sidebar">
  <div class="sidebar-top">
    <a routerLink="/" class="sidebar-icon logo">
      <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M10 4H22V28H10V4Z" fill="black"/>
        <path d="M10 28C10 28 10 22 16 22C22 22 22 28 22 28" stroke="white" stroke-width="2"/>
      </svg>
    </a>
    
    <a routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}" class="sidebar-icon" [title]="'nav.home' | t">
      <span class="material-symbols-outlined">image</span>
    </a>
    
    <div class="divider"></div>
    
    <a routerLink="/explore" routerLinkActive="active" class="sidebar-icon" [title]="lang() === 'ar' ? 'استكشف' : 'Explore'">
      <span class="material-symbols-outlined">explore</span>
    </a>
    
    <a routerLink="/collections" routerLinkActive="active" class="sidebar-icon" [title]="lang() === 'ar' ? 'المجموعات' : 'Collections'">
      <span class="material-symbols-outlined">folder</span>
    </a>
    
    <a routerLink="/downloads" routerLinkActive="active" class="sidebar-icon" [title]="lang() === 'ar' ? 'التحميلات' : 'Downloads'">
      <span class="material-symbols-outlined">download</span>
    </a>
    
    <div class="divider"></div>
    
    <a routerLink="/saved" routerLinkActive="active" class="sidebar-icon" [title]="lang() === 'ar' ? 'المحفوظات' : 'Saved'">
      <span class="material-symbols-outlined">bookmark</span>
    </a>
  </div>

  <div class="sidebar-bottom">
    <!-- Profile icon - goes to shop for sellers, profile for buyers -->
    <a *ngIf="isLoggedIn()" [routerLink]="profileLink()" class="sidebar-icon" [title]="isSeller() ? ('nav.myShop' | t) : isAdmin() ? ('nav.adminDashboard' | t) : ('nav.profile' | t)">
      <span class="material-symbols-outlined">person</span>
    </a>
    <a *ngIf="!isLoggedIn()" routerLink="/login" class="sidebar-icon" [title]="'nav.login' | t">
      <span class="material-symbols-outlined">person</span>
    </a>
    
    <!-- Language Switcher -->
    <button class="sidebar-icon" (click)="toggleLang()" [title]="'nav.language' | t">
      <span class="material-symbols-outlined">translate</span>
    </button>
    
    <div class="menu-container">
      <button class="sidebar-icon" [title]="lang() === 'ar' ? 'القائمة' : 'Menu'" (click)="toggleMenu()">
        <span class="material-symbols-outlined">menu</span>
      </button>
      
      <div class="hamburger-menu" *ngIf="showMenu()">
        <div class="menu-header">
          <h3>{{ 'nav.categories' | t }}</h3>
          <button class="close-btn" (click)="toggleMenu()">
            <span class="material-symbols-outlined">close</span>
          </button>
        </div>
        
        <div class="menu-content">
          <div *ngFor="let cat of categories()" class="category-item">
            <div class="category-header" (click)="toggleCategory(cat.id)">
              <span>{{ lang() === 'ar' ? cat.nameAr : cat.nameEn }}</span>
              <span class="material-symbols-outlined">
                {{ expandedCategoryId() === cat.id ? 'expand_less' : 'expand_more' }}
              </span>
            </div>
            
            <div class="subcategories-list" *ngIf="expandedCategoryId() === cat.id">
              <a *ngFor="let sub of subCategories()" 
                 [routerLink]="['/categories', cat.id, 'subcategories']" 
                 (click)="toggleMenu()"
                 class="subcategory-item">
                {{ lang() === 'ar' ? sub.nameAr : sub.nameEn }}
              </a>
              <div *ngIf="subCategories().length === 0" class="no-subs">{{ lang() === 'ar' ? 'لا توجد تصنيفات فرعية' : 'No subcategories' }}</div>
            </div>
          </div>
        </div>

        <div class="menu-footer">
          <button *ngIf="isLoggedIn()" (click)="logout()" class="auth-btn logout">
            <span class="material-symbols-outlined">logout</span>
            {{ 'nav.logout' | t }}
          </button>
          <a *ngIf="!isLoggedIn()" routerLink="/login" (click)="toggleMenu()" class="auth-btn login">
            <span class="material-symbols-outlined">login</span>
            {{ 'nav.login' | t }}
          </a>
        </div>
      </div>
    </div>
  </div>
</aside>
